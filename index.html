<!DOCTYPE html>
<html>
<head>
  <title>HackPulse CTF - Click the Right One</title>
  <style>
    body {
      background-color: #101010;
      color: #ffffff;
      font-family: 'Fira Code', monospace;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .container {
      background-color: #1a1a1a;
      border: 2px solid #00ff00;
      border-radius: 15px;
      padding: 30px;
      width: 95%;
      max-width: 1000px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      margin-top: 0;
      color: #00ff00;
      text-align: center;
    }

    p {
      font-size: 1.1em;
      color: #cccccc;
      text-align: center;
      margin-bottom: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
      width: 100%;
    }

    .grid button {
      padding: 10px;
      background-color: #2e2e2e;
      color: #00ff00;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      font-weight: bold;
    }

    .grid button:hover {
      background-color: #00aa00;
      color: #000;
    }

    #flag, #error {
      margin-top: 20px;
      font-family: monospace;
      font-size: 1.2em;
      display: none;
    }

    #flag {
      color: #00ff00;
    }

    #error {
      color: red;
    }
  </style>
  <script>
    // Pre-hashed SHA-256 of "142"
    const correctHash = '1ebbf9c5104ffb768dcf132b032b16f9e2d818e9ddc870a7a983f889059f9511';

    async function hashText(text) {
      const encoder = new TextEncoder();
      const data = encoder.encode(text);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    async function handleClick(number) {
      const hash = await hashText(number.toString());
      const flagElem = document.getElementById("flag");
      const errorElem = document.getElementById("error");
      flagElem.style.display = 'none';
      errorElem.style.display = 'none';

      if (hash === correctHash) {
        flagElem.innerText = "âœ… flag{lucky_click_ctf_master}";
        flagElem.style.display = 'block';
      } else {
        errorElem.innerText = "âŒ Wrong portal. Try another.";
        errorElem.style.display = 'block';
      }
    }

    window.onload = () => {
      const grid = document.querySelector('.grid');
      for (let i = 1; i <= 200; i++) {
        const btn = document.createElement("button");
        btn.innerText = "Node #" + i;
        btn.addEventListener("click", () => handleClick(i));
        grid.appendChild(btn);
      }
    };
  </script>
</head>
<body>
  <div class="container">
    <h1>ðŸ’» HackPulse CTF: Echo Gate</h1>
    <p>Only one node leads to the flag. Choose wisely.</p>
    <div class="grid"></div>
    <div id="flag"></div>
    <div id="error"></div>
  </div>
</body>
</html>
